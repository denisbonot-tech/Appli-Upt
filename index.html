<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Up-T Phase 9 : Cloud Sync</title>
    <style>
        :root { --primary: #38bdf8; --bg: #020617; --card: #1e293b; --success: #22c55e; }
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        /* DESIGN PREMIUM */
        header { width: 100%; padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; border-bottom: 1px solid #334155; }
        .status-dot { width: 8px; height: 8px; background: var(--success); border-radius: 50%; display: inline-block; margin-right: 5px; box-shadow: 0 0 10px var(--success); }
        
        .container { background: var(--card); padding: 30px; border-radius: 24px; width: 90%; max-width: 450px; margin-top: 30px; border: 1px solid #334155; }
        
        .cloud-badge { background: #0f172a; padding: 5px 12px; border-radius: 20px; font-size: 10px; color: var(--primary); border: 1px solid var(--primary); margin-bottom: 15px; display: inline-block; }

        button { width: 100%; padding: 18px; border-radius: 50px; border: none; background: var(--primary); color: var(--bg); font-weight: 800; cursor: pointer; transition: 0.3s; }
        .vote-btn { background: var(--success); font-size: 1.8rem; height: 100px; width: 100px; border-radius: 50%; margin: 20px auto; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(34, 197, 94, 0.4); }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 13px; }
        th { text-align: left; color: #94a3b8; border-bottom: 1px solid #334155; padding-bottom: 10px; }
        td { padding: 12px 0; border-bottom: 1px solid #0f172a; }
        
        /* ANIMATION */
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .syncing { animation: pulse 1s infinite; }
    </style>
</head>
<body onload="initApp()">

    <header>
        <div style="font-weight: 900; color: var(--primary);">UP-T NETWORK</div>
        <div style="font-size: 12px; color: #94a3b8;"><span class="status-dot"></span> CLOUD CONNECTED</div>
    </header>

    <div id="auth-zone" class="container">
        <h2 style="text-align: center;">Identifiant Réseau</h2>
        <input type="text" id="username" placeholder="Pseudo" style="width:100%; padding:15px; margin:10px 0; border-radius:10px; border:1px solid #334155; background:#0f172a; color:white; box-sizing:border-box;">
        <select id="plan" style="width:100%; padding:15px; margin:10px 0; border-radius:10px; border:1px solid #334155; background:#0f172a; color:white;">
            <option value="1">Novice (x1)</option>
            <option value="10">Pro (x10)</option>
            <option value="20">Star (x20)</option>
        </select>
        <button onclick="login()">REJOINDRE LE CLOUD</button>
    </div>

    <div id="app-zone" class="container" style="display:none; text-align:center;">
        <div class="cloud-badge">SYNC ENGINE v1.0 ACTIVE</div>
        <div id="welcome-msg" style="color:#94a3b8;"></div>
        <div id="main-val" style="font-size: 5rem; font-weight: 900; color: var(--primary); margin: 10px 0;">0</div>
        
        <div class="vote-btn" onclick="vote()">⚡</div>
        
        <div style="margin-top: 30px; text-align: left;">
            <h4 style="color:var(--primary);">Classement en Temps Réel</h4>
            <table>
                <thead><tr><th>Pilote</th><th>Niveau</th><th>Score</th></tr></thead>
                <tbody id="leaderboard"></tbody>
            </table>
        </div>
        <button onclick="reset()" style="background:none; color:#ef4444; font-size:10px; margin-top:20px; border:none; text-decoration:underline;">Déconnexion</button>
    </div>

    <script>
        let user = { name: "", power: 1, score: 0 };
        // Simulation de données provenant d'autres utilisateurs (Cloud)
        let cloudData = [
            { name: "Elon_V", rank: "STAR", score: 1250 },
            { name: "Mars_Pioneer", rank: "PRO", score: 450 }
        ];

        function initApp() {
            const saved = localStorage.getItem('upt_cloud_session');
            if (saved) {
                user = JSON.parse(saved);
                showApp();
            }
        }

        function login() {
            const name = document.getElementById('username').value;
            const power = parseInt(document.getElementById('plan').value);
            if(!name) return;
            user = { name: name, power: power, score: 0 };
            save();
            showApp();
        }

        function vote() {
            user.score += user.power;
            save();
            updateDisplay();
            // Effet visuel de synchro
            const badge = document.querySelector('.cloud-badge');
            badge.innerText = "UPLOADING DATA...";
            setTimeout(() => { badge.innerText = "SYNC ENGINE v1.0 ACTIVE"; }, 500);
        }

        function save() {
            localStorage.setItem('upt_cloud_session', JSON.stringify(user));
        }

        function showApp() {
            document.getElementById('auth-zone').style.display = 'none';
            document.getElementById('app-zone').style.display = 'block';
            updateDisplay();
        }

        function updateDisplay() {
            document.getElementById('main-val').innerText = user.score;
            document.getElementById('welcome-msg').innerText = "Pilote : " + user.name;
            
            const table = document.getElementById('leaderboard');
            const myRank = user.power === 20 ? "STAR" : (user.power === 10 ? "PRO" : "NOVICE");
            
            // On combine tes données avec celles du "Cloud"
            let allData = [...cloudData, { name: user.name + " (Moi)", rank: myRank, score: user.score }];
            allData.sort((a, b) => b.score - a.score);

            table.innerHTML = allData.map(p => `
                <tr style="${p.name.includes('(Moi)') ? 'color:var(--primary); font-weight:bold;' : ''}">
                    <td>${p.name}</td>
                    <td>${p.rank}</td>
                    <td>${p.score}</td>
                </tr>
            `).join('');
        }

        function reset() {
            localStorage.removeItem('upt_cloud_session');
            location.reload();
        }
    </script>
</body>
</html>
